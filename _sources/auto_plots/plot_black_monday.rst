
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_plots/plot_black_monday.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        :ref:`Go to the end <sphx_glr_download_auto_plots_plot_black_monday.py>`
        to download the full example code.

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_plots_plot_black_monday.py:


Black Monday
============

.. GENERATED FROM PYTHON SOURCE LINES 8-98



.. rst-class:: sphx-glr-horizontal


    *

      .. image-sg:: /auto_plots/images/sphx_glr_plot_black_monday_001.png
         :alt: S\&P 500 Index Price
         :srcset: /auto_plots/images/sphx_glr_plot_black_monday_001.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_plots/images/sphx_glr_plot_black_monday_002.png
         :alt: SP500 Daily Returns
         :srcset: /auto_plots/images/sphx_glr_plot_black_monday_002.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_plots/images/sphx_glr_plot_black_monday_003.png
         :alt: S\&P500 Daily Log Returns
         :srcset: /auto_plots/images/sphx_glr_plot_black_monday_003.png
         :class: sphx-glr-multi-img

    *

      .. image-sg:: /auto_plots/images/sphx_glr_plot_black_monday_004.png
         :alt: Histogram of S\&P 500 Daily Log-Returns
         :srcset: /auto_plots/images/sphx_glr_plot_black_monday_004.png
         :class: sphx-glr-multi-img





.. code-block:: Python


    # Author: Dialid Santiago <d.santiago@outlook.com>
    # License: MIT
    # Description: Advent Calendar 2025 Day 5 - Black Monday Crash

    import yfinance as yf
    import pandas as pd
    import numpy as np
    import matplotlib.pyplot as plt
    from scipy.stats import norm

    plt.style.use("https://raw.githubusercontent.com/quantgirluk/matplotlib-stylesheets/main/quant-pastel-light.mplstyle")

    ticker = "^GSPC"
    data = yf.download(ticker, start="1985-01-01", progress=False, auto_adjust=False)
    black_monday_date = pd.Timestamp('1987-10-19')

    # Close prices
    prices = data["Close"]

    # Simple returns
    returns = prices.pct_change()

    # Logarithmic returns
    log_returns = np.log(prices / prices.shift(1))

    mean = log_returns.mean()
    std = log_returns.std()
    x = log_returns[log_returns.index == black_monday_date][ticker]
    black_monday_log_return = x.values[0]

    plt.figure(figsize=(12, 5), dpi=200)
    plt.plot(prices, color='#0079ff', linewidth=1.5)
    plt.title("S\\&P 500 Index Price")
    plt.xlabel("Date")
    plt.ylabel("Price")
    plt.grid(True)
    plt.show()

    plt.figure(figsize=(12, 5), dpi=200)
    plt.plot(returns, color='#ffb84c')
    plt.title("SP500 Daily Returns")
    plt.xlabel("Date")
    plt.ylabel("Return")
    plt.grid(True)
    plt.show()

    plt.figure(figsize=(12, 5), dpi=200)
    plt.plot(log_returns, color='#00dfa2')
    if not np.isnan(black_monday_log_return):
        plt.annotate(
            'Black Monday\n(1987-10-19)',
            xy=(black_monday_date ,black_monday_log_return),
            xytext=(pd.Timestamp('1987-12-19'),  black_monday_log_return + 0.1),
            arrowprops=dict(arrowstyle='->', color='darkred', lw=2),
            fontsize=10,
            ha='left',
            color='darkred',
            weight='bold'
        )

    plt.title("S\\&P500 Daily Log Returns")
    plt.xlabel("Date")
    plt.ylabel("Log-Return")
    plt.grid(True)
    plt.show()


    plt.figure(figsize=(12, 6), dpi=200)
    plt.hist(log_returns.dropna(), bins=100, color='#d4Adfc', alpha=0.7)
    xmin, xmax = plt.xlim()
    x = np.linspace(xmin, xmax, 400)
    p = norm.pdf(x, mean, std)
    plt.plot(x, p * len(log_returns.dropna()) * (xmax - xmin) / 100, 'darkred', linewidth=1.5, label='Normal Distribution Fit')

    if not np.isnan(black_monday_log_return):
        plt.annotate(
            'Black Monday\n(1987-10-29)',
            xy=(black_monday_log_return, 0),
            xytext=(black_monday_log_return + 0.05, 250),
            arrowprops=dict(arrowstyle='->', color='darkred', lw=2),
            fontsize=10,
            ha='left',
            color='darkred',
            weight='bold'
        )
    plt.title("Histogram of S\\&P 500 Daily Log-Returns")
    plt.xlabel("Return")
    plt.ylabel("Frequency")
    plt.legend()
    plt.show()

.. rst-class:: sphx-glr-timing

   **Total running time of the script:** (0 minutes 8.555 seconds)


.. _sphx_glr_download_auto_plots_plot_black_monday.py:

.. only:: html

  .. container:: sphx-glr-footer sphx-glr-footer-example

    .. container:: sphx-glr-download sphx-glr-download-jupyter

      :download:`Download Jupyter notebook: plot_black_monday.ipynb <plot_black_monday.ipynb>`

    .. container:: sphx-glr-download sphx-glr-download-python

      :download:`Download Python source code: plot_black_monday.py <plot_black_monday.py>`

    .. container:: sphx-glr-download sphx-glr-download-zip

      :download:`Download zipped: plot_black_monday.zip <plot_black_monday.zip>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
